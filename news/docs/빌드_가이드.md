# 통합 뉴스 도구 빌드 가이드

## 📋 개요
이 문서는 Python 기반 통합 뉴스 도구를 Windows 실행 파일(.exe)로 빌드하는 방법을 설명합니다.

## 🛠️ 필수 요구사항

### 1. Python 환경
- Python 3.8 이상
- pip 패키지 관리자

### 2. 필수 패키지 설치
```bash
pip install -r requirements.txt
```

### 3. 추가 빌드 도구
```bash
pip install pyinstaller
```

## 📦 의존성 패키지

### requirements.txt 내용
```
PyQt5
selenium
webdriver-manager
requests
beautifulsoup4
newspaper3k
Pillow
pyperclip
pywin32
```

## 🔧 빌드 방법

### 방법 1: 배치 파일 사용 (권장)
```bash
# build_exe.bat 실행
build_exe.bat
```

### 방법 2: 직접 명령어 실행
```bash
pyinstaller --onefile --windowed --icon=icofile/newstool.ico --hidden-import=PyQt5.sip --hidden-import=selenium --hidden-import=webdriver_manager --hidden-import=requests --hidden-import=bs4 --hidden-import=newspaper --hidden-import=PIL --hidden-import=pyperclip --hidden-import=win32clipboard --hidden-import=win32con --collect-all=selenium --collect-all=webdriver_manager --collect-all=requests --collect-all=bs4 --collect-all=newspaper --collect-all=PIL unified_gui.py
```

### 방법 3: 최적화된 빌드 (빠른 실행)
```bash
pyinstaller --onefile --windowed --icon=icofile/newstool.ico --hidden-import=PyQt5.sip --hidden-import=selenium --hidden-import=webdriver_manager --hidden-import=requests --hidden-import=bs4 --hidden-import=newspaper --hidden-import=PIL --hidden-import=pyperclip --hidden-import=win32clipboard --hidden-import=win32con --collect-all=selenium --collect-all=webdriver_manager --collect-all=requests --collect-all=bs4 --collect-all=newspaper --collect-all=PIL --exclude-module=matplotlib --exclude-module=numpy --exclude-module=scipy unified_gui.py
```

## 📁 빌드 결과물

### 생성되는 파일들
- `dist/unified_gui.exe` - 메인 실행 파일
- `build/` - 빌드 임시 파일들
- `unified_gui.spec` - PyInstaller 설정 파일

### 실행 파일 위치
```
프로젝트폴더/
├── dist/
│   └── unified_gui.exe  ← 최종 실행 파일
├── build/
├── unified_gui.spec
└── ...
```

## ⚠️ 주의사항

### 1. 경로 문제
- **한글 경로**: 빌드 시 한글이 포함된 경로는 피하세요
- **공백 경로**: 경로에 공백이 있으면 오류가 발생할 수 있습니다
- **권장 경로**: `C:\build\news_tool\` 같은 영문 경로 사용

### 2. 권한 문제
- **관리자 권한**: 빌드 시 관리자 권한으로 실행하세요
- **안티바이러스**: 일시적으로 안티바이러스를 비활성화하거나 예외 설정

### 3. 드라이버 문제
- **Chrome 브라우저**: 최신 버전 설치 필요
- **캐시 초기화**: 빌드 실패 시 드라이버 캐시 삭제
  ```
  %USERPROFILE%\.cache\selenium
  %USERPROFILE%\.wdm
  ```

## 🔍 문제 해결

### 빌드 실패 시 체크리스트
1. **Python 버전 확인**: `python --version`
2. **패키지 설치 확인**: `pip list`
3. **경로 확인**: 영문, 공백 없는 경로 사용
4. **권한 확인**: 관리자 권한으로 실행
5. **캐시 삭제**: 드라이버 캐시 폴더 삭제

### 일반적인 오류 해결

#### WinError 193 (잘못된 Win32 응용 프로그램)
```bash
# 드라이버 캐시 삭제
rmdir /s /q "%USERPROFILE%\.cache\selenium"
rmdir /s /q "%USERPROFILE%\.wdm"
```

#### PowerShell 실행 정책 오류
```powershell
# 실행 정책 변경
Set-ExecutionPolicy -ExecutionPolicy RemoteSigned -Scope CurrentUser
```

#### 메모리 부족 오류
```bash
# 가상 메모리 증가 또는 다른 방법 사용
pyinstaller --onefile --windowed --icon=icofile/newstool.ico unified_gui.py
```

## 🚀 실행 방법

### 1. 터미널에서 실행
```bash
cd dist
unified_gui.exe
```

### 2. 더블클릭으로 실행
- `dist` 폴더의 `unified_gui.exe` 더블클릭

### 3. 관리자 권한으로 실행
- exe 파일 우클릭 → "관리자 권한으로 실행"

## 📊 빌드 최적화

### 파일 크기 줄이기
```bash
# 불필요한 모듈 제외
pyinstaller --onefile --windowed --icon=icofile/newstool.ico --exclude-module=matplotlib --exclude-module=numpy --exclude-module=scipy --exclude-module=pandas unified_gui.py
```

### 실행 속도 개선
```bash
# 디버그 정보 제거
pyinstaller --onefile --windowed --icon=icofile/newstool.ico --strip unified_gui.py
```

## 🔧 고급 설정

### spec 파일 사용
```python
# unified_gui.spec 예시
a = Analysis(['unified_gui.py'],
             pathex=[],
             binaries=[],
             datas=[],
             hiddenimports=['PyQt5.sip', 'selenium', 'webdriver_manager'],
             hookspath=[],
             hooksconfig={},
             runtime_hooks=[],
             excludes=['matplotlib', 'numpy'],
             win_no_prefer_redirects=False,
             win_private_assemblies=False,
             cipher=None,
             noarchive=False)
```

### 환경 변수 설정
```bash
# 빌드 전 환경 변수 설정
set PYTHONPATH=%PYTHONPATH%;.
set PYTHONUNBUFFERED=1
```

## 📝 로그 확인

### 빌드 로그
- 빌드 중 콘솔에 출력되는 로그 확인
- 오류 메시지 주의 깊게 읽기

### 실행 로그
```bash
# 로그와 함께 실행
unified_gui.exe > log.txt 2>&1
```

## 🎯 성공적인 빌드를 위한 팁

1. **깨끗한 환경**: 가상환경 사용 권장
2. **순차적 설치**: 패키지를 하나씩 설치하며 테스트
3. **백업**: 빌드 전 코드 백업
4. **테스트**: 빌드 후 즉시 기능 테스트
5. **문서화**: 성공한 빌드 환경 기록

## 📞 지원

문제가 발생하면 다음 정보와 함께 문의하세요:
- Python 버전
- 운영체제 버전
- 오류 메시지 전체
- 빌드 환경 (경로, 권한 등)
- 시도한 해결 방법

---

**제작자**: 최준혁 (kimbap918)  
**최종 업데이트**: 2025년 07월 06일 